<%- model_class = Event -%>

<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:id) %>:</strong></dt>
  <dd><%= @event.id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
  <dd><%= @event.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:description) %>:</strong></dt>
  <dd><%= raw nl2br h @event.description %></dd>
  <dt><strong><%= model_class.human_attribute_name(:rooms) %>:</strong></dt>
  <dd><%= concat_rooms(@event) %></dd>
  <dt><strong><%= model_class.human_attribute_name(:participant_count) %>:</strong></dt>
  <dd><%= @event.participant_count %></dd>
  <dt><strong><%= model_class.human_attribute_name(:private) %>:</strong></dt>
  <dd><%= check_box_tag 'private', 'private', @event.is_private, disabled: :disabled %></dd>
  <dt><strong><%= model_class.human_attribute_name(:starts_at) %>:</strong></dt>
  <% if @event.starts_at %> 
    <dd><%= @event.starts_at.strftime("%d.%m.%Y - %H:%M") %></dd>
  <% end %> 
  <dt><strong><%= model_class.human_attribute_name(:ends_at) %>:</strong></dt>
  <% if  @event.ends_at%> 
  <dd><%= @event.ends_at.strftime("%d.%m.%Y - %H:%M") %></dd>
  <% end %>
  <dt><strong><%= model_class.human_attribute_name(:user) %>:</strong></dt>
  <dd><%= @user %></dd>
  <dt><strong><%= model_class.human_attribute_name(:created_at) %>:</strong></dt>
  <dd><%= @event.created_at.strftime("%d.%m.%Y %T") %></dd>
  <dt><strong><%= model_class.human_attribute_name(:updated_at) %>:</strong></dt>
  <dd><%= @event.updated_at.strftime("%d.%m.%Y %T") %></dd>
  <dt><strong><%= model_class.human_attribute_name(:status) %>:</strong></dt>
  <dd><%= @event.status %></dd>
  <dd>
    <% if @favorite.empty? %>
      <%= link_to t('.toogle', :default => t("helpers.links.add_favorite")),show_toggle_favorite_from_event_path(@event), :class => 'btn btn-xs btn-primary' %>
    <% else %>
      <%= link_to t('.toogle', :default => t("helpers.links.remove_favorite")),show_toggle_favorite_from_event_path(@event), :class => 'btn btn-xs btn-danger' %>
    <% end %> 
  </dd>
</dl>

<h4><%= t '.tasks' %></h4>
<% @event_id = @event.id %>
<%= render(partial: '/tasks/tasks_box', locals: { tasks: @tasks })%>

<%= link_to t('.back', :default => t("helpers.links.back")),
              @return_url.nil? ? events_path : @return_url, :class => 'btn btn-default'  %>
<% if can? :edit, @event %> 
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_event_path(@event), :class => 'btn btn-default' %>
<% end %>
<%= link_to t('.create', :default => t("helpers.submit.create", :model => EventTemplate.model_name.human.titleize)),
                      new_event_template_from_event_path(@event), :class => 'btn btn-default' %>
<% if can? :destroy, @event %> 
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                event_path(@event),
                :method => 'delete',
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you  sure?')) },
                :class => 'btn btn-danger' %>
<% end %>
