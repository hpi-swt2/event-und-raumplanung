<% title @task.name %>
<%- model_class = Task -%>
<div class="page-header">
  <h1><%= t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
  <dd><%= @task.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:description) %>:</strong></dt>
  <dd><%= @task.description %></dd>
  <% unless @task.event_id.nil? %>
    <dt><strong><%= model_class.human_attribute_name(:event_id) %>:</strong></dt>
    <dd><%= @task.event_id %></dd>
  <% end %>
  <% unless @task.event_template_id.nil? %>
    <dt><strong><%= model_class.human_attribute_name(:event_template_id) %>:</strong></dt>
    <dd><%= @task.event_template_id %></dd>
  <% end %>
  <% unless @task.identity_id.nil? %>
    <dt><strong><%= model_class.human_attribute_name(:identity_id) %>:</strong></dt>
    <dd><% if @task.identity %><%= @task.identity.name  %><% else %><%= t('tasks.user.none') %><% end %></dd>
  <% end %>
  <% if @task.deadline %> 
    <dt><strong><%= model_class.human_attribute_name(:deadline) %>:</strong></dt>
    <dd><%= @task.deadline.strftime("%d.%m.%Y") %></dd>
  <% end %>
  <% unless @task.event_id.nil? %>
    <dt><strong><%= model_class.human_attribute_name(:status) %>:</strong></dt>
    <dd class="<%= @task.status %>"><%= t('tasks.status.' + @task.status)%></dd>
    <dt><strong><%= model_class.human_attribute_name(:done) %>:</strong></dt>
    <dd><%= @task.done %></dd>
  <% end %>
</dl>

<dl>
  <h3><%= t('.attachments') %></h3>
  <% if has_attached_items? @task %>
    <% if @task.uploads.count() > 0 %>
      <h4><%= t('tasks.show.files') %></h4>
      <% @task.uploads.each do |upload| %>
          <%= link_to upload.file_file_name, public_url(upload.id, upload.file_file_name), :class => 'list-group-item' %>
      <% end %>
    <% else %>
      <%= t('tasks.attachments.none') %>
    <% end %>
    <% if @task.attachments.count() > 0 %>
    <h4><%= t('tasks.show.links') %></h4>
        <% @task.attachments.each do |attachment| %>
            <%= link_to attachment.title, attachment.url, :class => 'list-group-item' %>
        <% end %>
    <% end %>
  <% else %>
    <%= t('tasks.attachments.none') %>
  <% end %>
</dl>
<%= link_to t('.back', :default => t("helpers.links.back")), event_path(@task.event_id), :class => 'btn btn-default'  %>
<% if can? :edit, Task %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_task_path(@task), :class => 'btn btn-default' %>
<% end %>
<%if can? :destroy, Task %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                task_path(@task),
                :method => 'delete',
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                :class => 'btn btn-danger' %>
<% end %>
